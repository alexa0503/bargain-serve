(function(t){function e(e){for(var n,s,o=e[0],l=e[1],c=e[2],d=0,m=[];d<o.length;d++)s=o[d],i[s]&&m.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={0:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/v/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,1]),a()})({0:function(t,e,a){t.exports=a("Vtdi")},FPgb:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("router-view",{attrs:{name:"navigation"}}),a("router-view",{attrs:{name:"mainContent"}}),a("router-view",{attrs:{name:"login"}})],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},I77X:function(t,e,a){"use strict";var n=a("trWE"),i=a.n(n);e["default"]=i.a},Pf3K:function(t,e,a){"use strict";var n=a("FPgb"),i=a("I77X"),r=a("DHzb"),s=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},Vtdi:function(t,e,a){"use strict";a.r(e);a("yt8O"),a("VRzm");var n=a("Kw5r"),i=a("jE9Z"),r=a("Pf3K"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("登录")]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:""}}),a("v-tooltip",{attrs:{right:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",large:"",href:"https://codepen.io/johnjleider/pen/wyYVVj",target:"_blank"},slot:"activator"},[a("v-icon",{attrs:{large:""}},[t._v("mdi-codepen")])],1),a("span",[t._v("Codepen")])],1)],1),a("v-card-text",[a("v-text-field",{attrs:{"prepend-icon":"person",rules:t.rules.name,label:"登录名",name:"name",type:"text","error-messages":t.errors.name},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{attrs:{"prepend-icon":"lock",rules:t.rules.password,name:"password",label:"密码",type:"password","error-messages":t.errors.password},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{disabled:!t.valid,color:"primary"},on:{click:t.submit}},[t._v("登陆")])],1)],1)],1)],1)],1)],1)],1)},o=[],l=(a("f3/d"),""),c=l+"/api/admin/login",u=l+"/api/admin/me",d=l+"/api/admin/refresh",m=l+"/api/admin/",p=l+"/api/admin/items/{id}/publish",v=l+"/api/admin/items/{id}",f=l+"/api/admin/items/{id}",h=l+"/api/admin/items",g=l+"/api/admin/logout",_=l+"/api/admin/shop",b={data:function(){return{drawer:null,valid:!1,name:"",password:"",errors:{email:[],password:[]},rules:{name:[function(t){return!!t||"请输入登陆名"},function(t){return t.length>=3||"登陆名不能少于3个字符"}],password:[function(t){return!!t||"请输入密码"},function(t){return t.length>=6||"密码不能少于6个字符"}]}}},created:function(){this.$store.getters.token},methods:{submit:function(){var t=this;if(t.errors={name:[],password:[]},this.$refs.form.validate()){var e=c;axios.post(e,{name:this.name,password:this.password}).catch(function(e){if(e.response.status>=400){var a=e.response.data;for(var n in a)t.errors[n]=a[n][0]}})}}}},x=b,k=a("DHzb"),w=Object(k["a"])(x,s,o,!1,null,null,null),y=w.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":"","grid-list-md":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm4:"","offset-sm4":""}},[a("v-card",[t.shop?a("v-card-media",{attrs:{src:t.shop.code_image,height:"400px"}}):t._e(),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"orange"},on:{click:t.toDetail}},[t._v("查看详细")])],1)],1)],1),a("v-flex",{attrs:{xs12:"","justify-center":"","align-center":""}},[a("h3",[t._v("后台管理系统 Ver0.1")]),a("p",[t._v("Base on\n          "),a("a",{attrs:{href:"https://cn.vuejs.org"}},[t._v("Vue.js")]),t._v(",\n          "),a("a",{attrs:{href:"https://vuetifyjs.com"}},[t._v("Vuetify UI")]),t._v(",\n          "),a("a",{attrs:{href:"https://laravel.com"}},[t._v("Laravel")]),t._v(",\n          "),a("a",{attrs:{href:"http://jwt-auth.readthedocs.io/en/develop/"}},[t._v("jwt-auth")])])])],1)],1)],1)},$=[],j=a("yT7P"),C=a("L2JU"),O={computed:Object(j["a"])({},Object(C["b"])({shop:function(t){return t.me&&t.me.shop}})),methods:{toDetail:function(){this.$router.push({name:"setting"})}}},P=O,T=Object(k["a"])(P,I,$,!1,null,null,null),S=T.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{attrs:{clipped:t.$vuetify.breakpoint.lgAndUp,fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[t._l(t.items,function(e){return e.seen?[e.heading?a("v-layout",{key:e.heading,attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[e.heading?a("v-subheader",[t._v("\n              "+t._s(e.heading)+"\n            ")]):t._e()],1),a("v-flex",{staticClass:"text-xs-center",attrs:{xs6:""}},[a("a",{staticClass:"body-2 black--text",attrs:{href:"#!"}},[t._v("EDIT")])])],1):e.children?a("v-list-group",{key:e.text,attrs:{"prepend-icon":e.model?e.icon:e["icon-alt"],"append-icon":""},model:{value:e.model,callback:function(a){t.$set(e,"model",a)},expression:"item.model"}},[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                "+t._s(e.text)+"\n              ")])],1)],1),t._l(e.children,function(e,n){return a("v-list-tile",{key:n,on:{click:t.next}},[e.icon?a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1):t._e(),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                "+t._s(e.text)+"\n              ")])],1)],1)})],2):a("v-list-tile",{key:e.text,attrs:{router:"",to:{name:e.routerName},exact:""},on:{click:t.next}},[a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n              "+t._s(e.text)+"\n            ")])],1)],1)]:t._e()})],2)],1),a("v-toolbar",{attrs:{"clipped-left":t.$vuetify.breakpoint.lgAndUp,color:"blue darken-3",dark:"",app:"",fixed:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3",staticStyle:{width:"300px"}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("span",{staticClass:"hidden-sm-and-down"},[t._v("后台管理系统")])],1),a("v-text-field",{staticClass:"hidden-sm-and-down",attrs:{flat:"","solo-inverted":"","prepend-icon":"search",label:"Search"}}),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("refresh")])],1),a("v-btn",{attrs:{href:"#",router:"",icon:""},on:{click:t.logout}},[a("v-icon",[t._v("lock_open")])],1)],1)],1)},F=[],q=(a("rGqo"),{data:function(){return{dialog:!1,drawer:null,items:[{icon:"dashboard",text:"Dashboard",routerName:"home",seen:!0},{icon:"list",text:"砍价管理",routerName:"bargains",seen:!0},{icon:"list",text:"商品管理",routerName:"items",seen:!0},{icon:"supervisor_account",text:"授权用户",routerName:"users",seen:!1},{icon:"store",text:"店铺管理",routerName:"shops",seen:!1},{icon:"settings",text:"店铺管理",routerName:"setting",seen:!0}]}},mounted:function(){this.$store.dispatch("getMe")},computed:Object(j["a"])({},Object(C["b"])({is_super:function(t){return t.me&&t.me.is_super},token:function(t){return t.getters.token}})),watch:{$route:"update",is_super:function(t){this.items.forEach(function(e){"shop"==e.routerName?e.seen=t:"setting"==e.routerName&&(e.seen=!t)})}},methods:{update:function(){this.$store.dispatch("getMe")},next:function(){},logout:function(){var t=this;this.$store.dispatch("logout").then(function(){t.$router.push({name:"login"})})}}}),R=q,D=Object(k["a"])(R,E,F,!1,null,null,null),z=D.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-card",[a("v-card-title",[t._v("\n        "+t._s(t.title)+"\n        "),a("v-spacer"),a("v-flex",{attrs:{xs4:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:t.newItem}},[t._v("\n              新建\n          ")])],1),t.shops&&t.is_super?a("v-flex",{attrs:{xs4:"","mr-4":""}},[a("v-select",{attrs:{items:t.shops,label:"选择店铺",solo:""}})],1):t._e(),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},on:{"click:append":t.iconClick},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),a("v-data-table",{attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n              "+t._s(e.header.text)+"\n            ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-edit-dialog",{attrs:{"return-value":e.item.order_id,large:"",lazy:"",persistent:"","cancel-text":"取消","save-text":"保存"},on:{"update:returnValue":function(a){t.$set(e.item,"order_id",a)},save:function(a){t.saveOrder(e.item)}}},[a("div",[t._v(t._s(e.item.order_id))]),a("div",{staticClass:"mt-3 title",attrs:{slot:"input"},slot:"input"},[t._v("更新排序")]),a("v-text-field",{attrs:{slot:"input",rules:[t.integer],label:"编辑","single-line":"",counter:"",autofocus:""},slot:"input",model:{value:e.item.order_id,callback:function(a){t.$set(e.item,"order_id",a)},expression:"props.item.order_id"}})],1)],1),a("td",[a("img",{attrs:{src:e.item.image,height:"100"}})]),a("td",[t._v(t._s(e.item.name))]),a("td",[t._v(t._s(e.item.origin_price))]),a("td",[t._v(t._s(e.item.bargain_price))]),a("td",[t._v(t._s(e.item.total_num))]),a("td",[t._v(t._s(e.item.bargained_num))]),a("td",[t._v(t._s(e.item.winned_num))]),a("td",[t._v(t._s(e.item.exchanged_num))]),a("td",[t._v(t._s(e.item.bargain_min_price))]),a("td",[t._v(t._s(e.item.bargain_max_price))]),a("td",[t._v(t._s(e.item.bargain_min_times))]),a("td",[t._v(t._s(e.item.bargain_max_times))]),a("td",[t._v(t._s(1==e.item.is_posted?"已发布":"已下架"))]),a("td",[t._v(t._s(e.item.created_at))]),a("td",{staticClass:"justify-center  px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{title:"编辑",small:""},on:{click:function(a){t.editItem(e.item)}}},[t._v("\n              fas fa-pen\n            ")]),0==e.item.is_posted?a("v-icon",{staticClass:"mr-2",attrs:{title:"发布",small:""},on:{click:function(a){t.publishItem(e.item.id,"on")}}},[t._v("\n              fas fa-toggle-off\n            ")]):t._e(),1==e.item.is_posted?a("v-icon",{staticClass:"mr-2",attrs:{title:"下架",small:""},on:{click:function(a){t.publishItem(e.item.id,"off")}}},[t._v("\n              fas fa-toggle-on\n            ")]):t._e(),0==e.item.is_posted?a("v-icon",{attrs:{title:"删除",small:""},on:{click:function(a){t.deleteItem(e.item)}}},[t._v("\n              fas fa-trash-alt\n            ")]):t._e()],1)]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"error",icon:"warning"}},[t._v("\n            抱歉，没有数据可以显示 :(\n          ")])],1)],2)],1),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1),a("v-snackbar",{attrs:{top:!0,right:!0,color:t.snackColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.snackbarText)+"\n    "),a("v-btn",{attrs:{flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n      关闭\n    ")])],1)],1)},L=[],M=(a("OG14"),a("pIFo"),a("oyJW")),N={data:function(){var t;return t={title:"砍价管理",search:"",snackColor:"success",selected:[],pagination:{},items:[],loading:!1,snackbar:!1,snackbarText:"更新成功~"},Object(M["a"])(t,"loading",!1),Object(M["a"])(t,"shops",[]),Object(M["a"])(t,"dialog",!1),Object(M["a"])(t,"integer",function(t){return!!t&&/^\d+$/.test(t)||"必须填写整数"}),Object(M["a"])(t,"headers",[{text:"排序ID",value:"status",sortable:!1},{text:"图片",value:"image",sortable:!1},{text:"商品名",value:"name",sortable:!1},{text:"原价",value:"origin_price",sortable:!1},{text:"最低价",value:"bargain_price",sortable:!1},{text:"总数",value:"total_num",sortable:!1},{text:"已砍数量",value:"bargained_num",sortable:!1},{text:"已赢取数量",value:"winned_num",sortable:!1},{text:"已兑换数量",value:"exchanged_num",sortable:!1},{text:"最低砍价金额",value:"bargain_min_price",sortable:!1},{text:"最高砍价金额",value:"bargain_max_price",sortable:!1},{text:"最少砍价次数",value:"bargain_min_times",sortable:!1},{text:"最多砍价次数",value:"bargain_max_times",sortable:!1},{text:"创建时间",value:"created_at",sortable:!1},{text:"状态",value:"status",sortable:!1},{text:"操作",value:"operation",sortable:!1}]),Object(M["a"])(t,"searchIcon","search"),t},computed:Object(j["a"])({},Object(C["b"])({is_super:function(t){return t.me&&t.me.is_super}}),{page:function(){return this.pagination?this.pagination.page:1},formTitle:function(){return-1===this.editedIndex?"新建":"编辑"}}),created:function(){this.getItems(1)},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{newItem:function(t){this.$router.push({name:"createItem"})},submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},editItem:function(t){this.$router.push({name:"item",params:{id:t.id}})},publishItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"on",a=this;a.loading=!0;var n=p.replace("{id}",t);axios({method:"POST",url:n,data:{type:e}}).then(function(n){console.log(n);var i=n.data;a.snackbar=!0,a.loading=!1,i&&0!=i.ret?(a.snackColor="error",a.snackbarText=i.errMsg):(a.snackbarText="操作成功~",a.snackColor="success",a.updateItem(t,e))}).catch(function(t){a.snackColor="error",a.snackbar=!0,a.loading=!1,a.snackbarText="服务器错误,请重试或者联系管理员"})},updateItem:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"on",a=this,n=0;n<a.items.length;n++)if(a.items[n].id==t){a.items[n].is_posted="on"==e?1:0;break}},saveOrder:function(t){var e=this,a=v.replace("{id}",t.id);t.type="order",axios({method:"PUT",url:a,data:t}).then(function(t){e.snackbar=!0,e.snackColor="success",e.snackbarText="排序更新成功"}).catch(function(t){e.snackbar=!0,e.snackColor="error",e.snackbarText="提交失败"})},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},deleteItem:function(t){var e=this;if(confirm("此操作不可返回，是否继续")){var a=f.replace("{id}",t.id);t.type="order",axios({method:"DELETE",url:a,data:t}).then(function(a){e.snackbar=!0,e.snackColor="success",e.snackbarText="删除成功";var n=e.items.indexOf(t);e.items.splice(n,1)}).catch(function(t){e.snackbar=!0,e.snackColor="error",e.snackbarText="提交失败"})}},getItems:function(t){var e=this,a=e.search;e.loading=!0,e.$store.dispatch("getItems",{model:"items",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})}}},V=N,A=Object(k["a"])(V,U,L,!1,null,null,null),W=A.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[t.inputs?a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-flex",[t.inputs&&t.inputs.image?a("img",{attrs:{src:t.inputs.image,width:"375"}}):t._e(),a("v-text-field",{attrs:{label:"预览图[750px*556px]",value:"点击选择图片"},on:{click:function(e){t.pickFile("image")}}}),a("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:"multiple"},on:{change:function(e){t.onFilePicked(e)}}})],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.inputs.images,function(e,n){return a("v-flex",{key:n,attrs:{xs4:"","mr-2":"","mb-2":""}},[a("v-card",[a("v-card-media",{attrs:{src:e,height:"200px"}}),a("v-card-actions",{staticClass:"pa-3"},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"dark"},on:{click:function(e){t.deleteImage(n)}}},[t._v("删除")])],1)],1)],1)})),a("v-text-field",{attrs:{label:"幻灯片[750px*556px]",value:"点击选择图片/可多张"},on:{click:function(e){t.pickFile("images")}}}),a("input",{ref:"images",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:"multiple"},on:{change:function(e){t.onFilesPicked(e)}}})],1),a("v-text-field",{attrs:{rules:t.rules.name,label:"商品名称",required:"","error-messages":t.errors.name},model:{value:t.inputs.name,callback:function(e){t.$set(t.inputs,"name",e)},expression:"inputs.name"}}),a("v-textarea",{attrs:{"error-messages":t.errors.descr,"auto-grow":"",rows:"2",rules:t.rules.descr,label:"商品简介",required:""},model:{value:t.inputs.descr,callback:function(e){t.$set(t.inputs,"descr",e)},expression:"inputs.descr"}}),a("v-text-field",{attrs:{rules:t.rules.total_num,label:"总量","error-messages":t.errors.total_num,required:""},model:{value:t.inputs.total_num,callback:function(e){t.$set(t.inputs,"total_num",e)},expression:"inputs.total_num"}}),a("v-text-field",{attrs:{rules:t.rules.origin_price,label:"原价",required:"","error-messages":t.errors.origin_price},model:{value:t.inputs.origin_price,callback:function(e){t.$set(t.inputs,"origin_price",e)},expression:"inputs.origin_price"}}),a("v-text-field",{attrs:{rules:t.rules.bargain_price,label:"最低价",required:"","error-messages":t.errors.bargain_price},model:{value:t.inputs.bargain_price,callback:function(e){t.$set(t.inputs,"bargain_price",e)},expression:"inputs.bargain_price"}}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{rules:t.rules.bargain_min_price,label:"可砍最低价格",required:"","error-messages":t.errors.bargain_min_price},model:{value:t.inputs.bargain_min_price,callback:function(e){t.$set(t.inputs,"bargain_min_price",e)},expression:"inputs.bargain_min_price"}})],1),a("v-flex",{attrs:{xs6:"","px-2":""}},[a("v-text-field",{attrs:{rules:t.rules.bargain_max_price,label:"可砍最高价格",required:"","error-messages":t.errors.bargain_max_price},model:{value:t.inputs.bargain_max_price,callback:function(e){t.$set(t.inputs,"bargain_max_price",e)},expression:"inputs.bargain_max_price"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{rules:t.rules.bargain_min_times,label:"最少砍价次数",required:"","error-messages":t.errors.bargain_min_times},model:{value:t.inputs.bargain_min_times,callback:function(e){t.$set(t.inputs,"bargain_min_times",e)},expression:"inputs.bargain_min_times"}})],1),a("v-flex",{attrs:{xs6:"","px-2":""}},[a("v-text-field",{attrs:{rules:t.rules.bargain_max_times,label:"最多砍价次数",required:"","error-messages":t.errors.bargain_max_times},model:{value:t.inputs.bargain_max_times,callback:function(e){t.$set(t.inputs,"bargain_max_times",e)},expression:"inputs.bargain_max_times"}})],1)],1),a("v-btn",{attrs:{loading:t.loading,disabled:!t.valid,large:"",color:"primary"},on:{click:t.submit}},[t._v("\n                提交\n            ")]),a("v-btn",{attrs:{large:"",color:"primary"},on:{click:t.toIndex}},[t._v("\n                返回\n            ")])],1):t._e()],1),a("v-snackbar",{attrs:{top:!0,right:!0,color:t.snackColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        "+t._s(t.snackText)+"\n        "),a("v-btn",{attrs:{flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n            关闭\n        ")])],1)],1)},K=[],X=(a("KKXr"),a("k5N+")),G={data:function(){return{loading:!1,snackbar:!1,snackColor:"",snackText:"操作成功",valid:!0,inputs:{name:null,image:null,images:[],origin_price:99,bargain_price:.99,total_num:99,bargain_max_price:9,bargain_min_price:.99,bargain_min_times:5,bargain_max_times:20},menu1:!1,menu2:!1,errors:{name:[],descr:[],image:[],images:[],origin_price:[],bargain_price:[],total_num:[],bargain_max_price:[],bargain_min_price:[],bargain_min_times:[],bargain_max_times:[]},rules:{name:[function(t){return!!t||"请输入店铺名"}],descr:[function(t){return!!t||"请输入描述"}],image:[],images:[],origin_price:[],bargain_price:[],total_num:[],bargain_max_price:[],bargain_min_price:[],bargain_min_times:[],bargain_max_times:[]}}},created:function(){this.getItem()},computed:Object(j["a"])({},Object(C["b"])({})),watch:{$router:"getItem"},methods:{toIndex:function(){this.$router.go(-1)},deleteImage:function(t){this.inputs.images.splice(t,1)},submit:function(){var t,e,a=this;a.$refs.form.validate()&&(a.inputs.id?(t=v.replace("{id}",a.inputs.id),e="PUT"):(t=h,e="POST"),a.loading=!0,axios({method:e,url:t,data:a.inputs}).then(function(t){a.snackbar=!0,a.snackColor="success",a.snackText="更新成功",a.loading=!1,"POST"==e&&this.clear()}).catch(function(t){if(a.snackbar=!0,a.snackColor="error",a.loading=!1,422==t.response.status){a.snackText="输入错误哦";var e=t.response.errors;for(var n in e)a.errors[n]=e[n]}else a.snackText="服务器错误"}))},clear:function(){this.$refs.form.reset()},getItem:function(){var t=this;if(t.$route.params.id){var e=t.$route.params.id,a=v.replace("{id}",e);axios({method:"GET",url:a}).then(function(e){t.inputs=e.data.data})}},pickFile:function(t){this.$refs[t].click()},onFilePicked:function(t){var e=this,a=t.target.files;if(void 0!==a[0]){if(a[0].name.lastIndexOf(".")<=0)return;var n=new FileReader;n.readAsDataURL(a[0]),n.addEventListener("load",function(){e.inputs.image=n.result})}else this.inputs.image=""},onFilesPicked:function(t){var e=this,a=t.target.files;if(void 0!==a[0]){if(a[0].name.lastIndexOf(".")<=0)return;this.inputs.images||(this.inputs.images=[]);for(var n=function(t){var n=new FileReader;n.readAsDataURL(a[t]),n.addEventListener("load",function(){e.inputs.images.push(n.result)})},i=0;i<a.length;i++)n(i)}else this.inputs.images=[]},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(X["a"])(e,3),n=a[0],i=a[1],r=a[2];return"".concat(i,"/").concat(r,"/").concat(n)}}},H=G,B=Object(k["a"])(H,J,K,!1,null,null,null),Y=B.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-card",[a("v-card-title",[t._v("\n        "+t._s(t.title)+"\n        "),a("v-spacer"),a("div",{staticClass:"flex xs4"},[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("v-text-field",{attrs:{"append-icon-cb":t.iconClick,"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n              "+t._s(e.header.text)+"\n            ")]),a("span",[t._v("\n              "+t._s(e.header.value)+"\n            ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-avatar",{attrs:{tile:!1,size:"48px",color:"grey lighten-4"}},[a("img",{attrs:{src:e.item.avatar}})])],1),a("td",[t._v(t._s(e.item.nickname))]),a("td",[t._v(t._s(e.item.country)+"/"+t._s(e.item.province)+"/"+t._s(e.item.city))]),a("td",[t._v(t._s(e.item.sex))]),a("td",[t._v(t._s(e.item.tel))]),a("td",[t._v(t._s(e.item.created_at))]),a("td",[a("div",[a("v-btn",{attrs:{dark:"",fab:"",small:"",color:"primary"}},[a("v-icon",{attrs:{dark:""}},[t._v("remove")])],1),a("v-btn",{attrs:{dark:"",fab:"",small:"",color:"primary"}},[a("v-icon",{attrs:{dark:""}},[t._v("edit")])],1)],1)])]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"error",icon:"warning"}},[t._v("\n            抱歉，没有数据可以显示 :(\n          ")])],1)],2)],1),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1)],1)},Q=[],tt={data:function(){return{title:"店铺管理",search:"",selected:[],pagination:{},items:[],loading:!1,headers:[{text:"头像",value:"avatar",sortable:!1},{text:"昵称",value:"nickname",sortable:!1},{text:"国家/省/市/区",value:"country",sortable:!1},{text:"性别",value:"sex",sortable:!1},{text:"电话",value:"tel",sortable:!1},{text:"创建时间",value:"created_at",sortable:!1},{text:"操作",value:null,sortable:!1}],searchIcon:"search"}},computed:Object(j["a"])({},Object(C["b"])({}),{page:function(){return this.pagination?this.pagination.page:1}}),created:function(){this.getItems(1)},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},getItems:function(t){var e=this,a=e.search;e.loading=!0,e.$store.dispatch("getItems",{model:"shop",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})}}},et=tt,at=Object(k["a"])(et,Z,Q,!1,null,null,null),nt=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-card",[a("v-card-title",[t._v("\n        "+t._s(t.title)+"\n        "),a("v-spacer"),a("div",{staticClass:"flex xs4"},[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("v-text-field",{attrs:{"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},on:{"click:append":t.iconClick},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n              "+t._s(e.header.text)+"\n            ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-avatar",{attrs:{tile:!1,size:"48px",color:"grey lighten-4"}},[a("img",{attrs:{src:e.item.avatar}})])],1),a("td",[t._v(t._s(e.item.nickname))]),a("td",[t._v(t._s(e.item.country)+"/"+t._s(e.item.province)+"/"+t._s(e.item.city))]),a("td",[t._v(t._s(e.item.sex))]),a("td",[t._v(t._s(e.item.tel))]),a("td",[t._v(t._s(e.item.created_at))])]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"error",icon:"warning"}},[t._v("\n            抱歉，没有数据可以显示 :(\n          ")])],1)],2)],1),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1)],1)},rt=[],st={data:function(){return{title:"用户授权",search:"",selected:[],pagination:{},items:[],loading:!1,headers:[{text:"头像",value:"avatar",sortable:!1},{text:"昵称",value:"nickname",sortable:!1},{text:"国家/省/市/区",value:"country",sortable:!1},{text:"性别",value:"sex",sortable:!1},{text:"电话",value:"tel",sortable:!1},{text:"创建时间",value:"created_at",sortable:!1}],searchIcon:"search"}},computed:Object(j["a"])({},Object(C["b"])({}),{page:function(){return this.pagination?this.pagination.page:1}}),created:function(){this.getItems(1)},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},getItems:function(t){var e=this,a=e.search;e.loading=!0,e.$store.dispatch("getItems",{model:"user",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})}}},ot=st,lt=Object(k["a"])(ot,it,rt,!1,null,null,null),ct=lt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[t.inputs?a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.name,label:"店铺名",required:""},model:{value:t.inputs.name,callback:function(e){t.$set(t.inputs,"name",e)},expression:"inputs.name"}}),a("v-text-field",{attrs:{rules:t.rules.title,label:"页面标题",required:""},model:{value:t.inputs.title,callback:function(e){t.$set(t.inputs,"title",e)},expression:"inputs.title"}}),a("v-text-field",{attrs:{rules:t.rules.tel,label:"联系电话",required:""},model:{value:t.inputs.tel,callback:function(e){t.$set(t.inputs,"tel",e)},expression:"inputs.tel"}}),a("v-text-field",{attrs:{rules:t.rules.address,label:"地址",required:""},model:{value:t.inputs.address,callback:function(e){t.$set(t.inputs,"address",e)},expression:"inputs.address"}}),a("v-flex",[t.inputs&&t.inputs.thumb?a("img",{attrs:{src:t.inputs.thumb,height:"200"}}):t._e(),a("v-text-field",{attrs:{label:"店铺头像[200px*200px]"},on:{click:function(e){t.pickFile("thumb")}},model:{value:t.inputs.thumb_name,callback:function(e){t.$set(t.inputs,"thumb_name",e)},expression:"inputs.thumb_name"}}),a("input",{ref:"thumb",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.onFilePicked("thumb",e)}}})],1),a("v-flex",[t.inputs&&t.inputs.header_image?a("img",{attrs:{src:t.inputs.header_image,width:"750"}}):t._e(),a("v-text-field",{attrs:{label:"头部图片[750px*300px]"},on:{click:function(e){t.pickFile("header_image")}},model:{value:t.inputs.header_image_name,callback:function(e){t.$set(t.inputs,"header_image_name",e)},expression:"inputs.header_image_name"}}),a("input",{ref:"header_image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.onFilePicked("header_image",e)}}})],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",lg6:""}},[a("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[a("v-text-field",{attrs:{slot:"activator",label:"活动开始日期",hint:"","persistent-hint":"","prepend-icon":"event"},slot:"activator",model:{value:t.inputs.start_date,callback:function(e){t.$set(t.inputs,"start_date",e)},expression:"inputs.start_date"}}),a("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.inputs.start_date,callback:function(e){t.$set(t.inputs,"start_date",e)},expression:"inputs.start_date"}})],1)],1),a("v-flex",{attrs:{xs12:"",lg6:""}},[a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[a("v-text-field",{attrs:{slot:"activator",label:"活动结束日期",hint:"","persistent-hint":"","prepend-icon":"event"},slot:"activator",model:{value:t.inputs.end_date,callback:function(e){t.$set(t.inputs,"end_date",e)},expression:"inputs.end_date"}}),a("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu2=!1}},model:{value:t.inputs.end_date,callback:function(e){t.$set(t.inputs,"end_date",e)},expression:"inputs.end_date"}})],1)],1)],1),a("v-btn",{attrs:{loading:t.loading,disabled:!t.valid,large:"",color:"primary"},on:{click:t.submit}},[t._v("\n                更新店铺信息\n            ")])],1):t._e()],1),a("v-snackbar",{attrs:{top:!0,right:!0},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        更新成功~\n        "),a("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n            关闭\n        ")])],1)],1)},dt=[],mt={data:function(){return{loading:!1,snackbar:!1,valid:!0,inputs:{},menu1:!1,menu2:!1,errors:{name:[],title:[],thumb:[],tel:[],address:[]},rules:{name:[function(t){return!!t||"请输入店铺名"}],title:[function(t){return!!t||"请输入页面标题"}],thumb:[function(t){return!!t||"请上传店铺头像"}],tel:[function(t){return!!t||"请输入电话"}],address:[function(t){return!!t||"请填写地址"}]}}},mounted:function(){var t=this.$store.state;t.me&&(this.inputs=t.me.shop)},computed:Object(j["a"])({},Object(C["b"])({shop:function(t){return t.me&&t.me.shop}})),watch:{shop:function(t){t&&(this.inputs=t)}},methods:{submit:function(){var t=this;if(t.$refs.form.validate()){var e=_+"/"+t.shop.id;t.loading=!0,axios({method:"PUT",url:e,data:{name:t.inputs.name,title:t.inputs.title,header_image:t.inputs.header_image,thumb:t.inputs.thumb,tel:t.inputs.tel,address:t.inputs.address,start_date:t.inputs.start_date,end_date:t.inputs.end_date}}).then(function(e){t.snackbar=!0,t.loading=!1}).catch(function(e){if(t.snackbar=!0,t.loading=!1,e.response.status>=400){var a=e.response.data;for(var n in a)self.errors[n]=a[n][0]}})}},clear:function(){this.$refs.form.reset()},pickFile:function(t){this.$refs[t].click()},onFilePicked:function(t,e){var a=this,n=e.target.files,i=t+"_name";if(void 0!==n[0]){if(this.inputs[i]=n[0].name,this.inputs[i].lastIndexOf(".")<=0)return;var r=new FileReader;r.readAsDataURL(n[0]),r.addEventListener("load",function(){a.inputs[t]=r.result})}else this.inputs[t]="",this.inputs[i]=""},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(X["a"])(e,3),n=a[0],i=a[1],r=a[2];return"".concat(i,"/").concat(r,"/").concat(n)}}},pt=mt,vt=Object(k["a"])(pt,ut,dt,!1,null,null,null),ft=vt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-card",[a("v-card-title",[t._v("\n                "+t._s(t.title)+"\n                "),a("v-spacer"),t.shops&&t.is_super?a("div",{staticClass:"flex xs4 mr-4"},[a("v-select",{attrs:{items:t.shops,label:"选择店铺",solo:""}})],1):t._e(),a("div",{staticClass:"flex xs4"},[a("v-text-field",{attrs:{"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},on:{"click:append":t.iconClick},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                            "+t._s(e.header.text)+"\n                        ")])])]}},{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.item_name))]),a("td",[t._v(t._s(e.item.user_name))]),a("td",[t._v(t._s(e.item.joined_times))]),a("td",[t._v(t._s(e.item.current_price))]),a("td",[t._v(t._s(1==e.item.is_winned?"是":"否"))]),a("td",[t._v(t._s(1==e.item.has_bought?"是":"否"))]),a("td",[t._v(t._s(e.item.created_at))])]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"error",icon:"warning"}},[t._v("\n                        抱歉，没有数据可以显示 :(\n                    ")])],1)],2)],1),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1)],1)},gt=[],_t={data:function(){return{title:"砍价管理",search:"",selected:[],pagination:{},items:[],loading:!1,shops:[],headers:[{text:"商品名称",value:"item_id",sortable:!1},{text:"用户名",value:"nickname",sortable:!1},{text:"被砍次数",value:"joined_times",sortable:!1},{text:"当前价格",value:"current_price",sortable:!1},{text:"是否赢取",value:"is_winned",sortable:!1},{text:"是否购买",value:"has_bought",sortable:!1},{text:"创建时间",value:"created_at",sortable:!1}],searchIcon:"search"}},computed:Object(j["a"])({},Object(C["b"])({is_super:function(t){return t.me&&t.me.is_super}}),{page:function(){return this.pagination?this.pagination.page:1}}),created:function(){this.getItems(1)},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},getItems:function(t){var e=this,a=e.search;e.loading=!0,e.$store.dispatch("getItems",{model:"bargain",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})}}},bt=_t,xt=Object(k["a"])(bt,ht,gt,!1,null,null,null),kt=xt.exports,wt=[{path:"/login",name:"login",meta:{title:"登陆"},components:{login:y}},{path:"/",name:"home",meta:{title:"首页"},components:{mainContent:S,navigation:z}},{path:"/",name:"logout",meta:{title:"登出"},components:{}},{path:"/users",name:"users",meta:{title:"授权用户"},components:{mainContent:ct,navigation:z}},{path:"/shops",name:"shops",meta:{title:"店铺管理"},components:{mainContent:nt,navigation:z}},{path:"/setting",name:"setting",meta:{title:"店铺管理"},components:{mainContent:ft,navigation:z}},{path:"/bargains",name:"bargains",meta:{title:"砍价查看"},components:{mainContent:kt,navigation:z}},{path:"/items",name:"items",meta:{title:"商品管理"},components:{mainContent:W,navigation:z}},{path:"/item/:id",name:"item",meta:{title:"商品编辑"},components:{mainContent:Y,navigation:z}},{path:"/item",name:"createItem",meta:{title:"创建商品"},components:{mainContent:Y,navigation:z}}],yt=wt,It={refreshToken:function(t,e){t.token=e,window.localStorage.setItem("token",e)},logout:function(t){t.token=null,t.me=null,window.localStorage.removeItem("token")},me:function(t,e){t.me=e}},$t=(a("ls82"),a("MECJ")),jt={getMe:function(){var t=Object($t["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.abrupt("return",new Promise(function(t,e){axios.get(u).then(function(e){a("me",e.data.data),t(e)}).catch(function(t){a("me",null),e(t)})}));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),refreshToken:function(){var t=Object($t["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.abrupt("return",new Promise(function(t,e){a?(n("refreshToken",a),t()):axios.post(d).then(function(e){n("refreshToken",e.data.token),t(e)}).catch(function(t){e(t)})}));case 2:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),login:function(){var t=Object($t["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit,t.abrupt("return",new Promise(function(t,e){}));case 2:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),logout:function(){var t=Object($t["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.abrupt("return",new Promise(function(t,e){axios.post(g).then(function(e){a("logout"),t(e)}).catch(function(t){e(t)})}));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getItems:function(t,e){t.state,t.commit;var a=e.model,n=e.page,i=e.keyword;return new Promise(function(t,e){void 0==n&&(n=1);var r=m+a;axios.get(r,{params:{page:n,keyword:i}}).then(function(e){e.data.data,e.data.headers,e.data.meta.per_page,e.data.meta.total,e.data.meta.current_page,e.data.meta.last_page;t(e.data)}).catch(function(t){e(t)})})}},Ct={token:function(t,e){return t.token=window.localStorage.getItem("token"),t.token},me:function(t,e){return t.me}};n["default"].use(C["a"]);var Ot=new C["a"].Store({state:{account:{},user:{},auth:!1,token:null,me:null},getters:Ct,actions:jt,mutations:It}),Pt=a("zlta"),Tt=a.n(Pt);a("tWx4"),a("FfUf");n["default"].use(Tt.a,{iconfont:"fa"}),n["default"].use(i["a"]);var St={hashbang:!0,mode:"hash",routes:yt},Et=new i["a"](St);window.axios=a("vDqi"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.defaults.withCredentials=!0,axios.interceptors.request.use(function(t){return Ot.getters.token&&(t.headers.Authorization="bearer ".concat(Ot.getters.token)),t},function(t){return Promise.reject(t)}),axios.interceptors.response.use(function(t){var e=t.data.token;return e&&Ot.dispatch("refreshToken",e).then(function(){Et.push({name:"home"})}),t},function(t){switch(t.response.status){case 401:Et.push({name:"login"});case 405:case 404:case 500:console.log(t)}return Promise.reject(t)}),Et.beforeEach(function(t,e,a){t.meta.title&&(document.title=t.meta.title+" - 后台管理系统"),a()}),n["default"].config.productionTip=!1,new n["default"]({router:Et,store:Ot,render:function(t){return t(r["default"])}}).$mount("#app")},tWx4:function(t,e,a){},trWE:function(t,e){}});
//# sourceMappingURL=app.8328d9bc.js.map