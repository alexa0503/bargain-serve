(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],u=0,m=[];u<o.length;u++)r=o[u],i[r]&&m.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/v/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"14f8":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("router-view",{attrs:{name:"navigation"}}),a("router-view",{attrs:{name:"mainContent"}}),a("router-view",{attrs:{name:"login"}})],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"23be":function(t,e,a){"use strict";var n=a("b6b5"),i=a.n(n);e["default"]=i.a},"3dfd":function(t,e,a){"use strict";var n=a("14f8"),i=a("23be"),s=a("0c7c"),r=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c");var n=a("2b0e"),i=a("8c4f"),s=a("3dfd"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("登录")]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:""}}),a("v-tooltip",{attrs:{right:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",large:"",href:"https://codepen.io/johnjleider/pen/wyYVVj",target:"_blank"},slot:"activator"},[a("v-icon",{attrs:{large:""}},[t._v("mdi-codepen")])],1),a("span",[t._v("Codepen")])],1)],1),a("v-card-text",[a("v-text-field",{attrs:{"prepend-icon":"person",rules:t.rules.name,label:"登录名",name:"name",type:"text","error-messages":t.errors.name},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{attrs:{"prepend-icon":"lock",rules:t.rules.password,name:"password",label:"密码",type:"password","error-messages":t.errors.password},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{disabled:!t.valid,color:"primary"},on:{click:t.submit}},[t._v("登陆")])],1)],1)],1)],1)],1)],1)],1)},o=[],c=(a("7f7f"),""),l=c+"/api/admin/login",d=c+"/api/admin/me",u=c+"/api/admin/refresh",m=c+"/api/admin/",v=c+"/api/admin/events",p=c+"/api/admin/events/{id}",f=c+"/api/admin/events",h=c+"/api/admin/event/{eventId}/items/{id}",g=c+"/api/admin/event/{eventId}/items",b=c+"/api/admin/items/{id}",_=c+"/api/admin/items/{id}",x=c+"/api/admin/items",k=c+"/api/admin/items",I=c+"/api/admin/logout",w=c+"/api/admin/shop",y={data:function(){return{drawer:null,valid:!1,name:"",password:"",errors:{email:[],password:[]},rules:{name:[function(t){return!!t||"请输入登陆名"},function(t){return t.length>=3||"登陆名不能少于3个字符"}],password:[function(t){return!!t||"请输入密码"},function(t){return t.length>=6||"密码不能少于6个字符"}]}}},created:function(){this.$store.getters.token},methods:{submit:function(){var t=this;if(t.errors={name:[],password:[]},this.$refs.form.validate()){var e=l;axios.post(e,{name:this.name,password:this.password}).catch(function(e){if(e.response.status>=400){var a=e.response.data;for(var n in a)t.errors[n]=a[n][0]}})}}}},O=y,j=a("0c7c"),C=Object(j["a"])(O,r,o,!1,null,null,null),$=C.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":"","grid-list-md":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm4:"","offset-sm4":""}},[a("v-card",[t.shop?a("v-card-media",{attrs:{src:t.shop.code_image,height:"400px"}}):t._e(),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"orange"},on:{click:t.toDetail}},[t._v("查看详细")])],1)],1)],1),a("v-flex",{attrs:{xs12:"","justify-center":"","align-center":""}},[a("h3",[t._v("后台管理系统 Ver0.1")]),a("p",[t._v("Base on\n          "),a("a",{attrs:{href:"https://cn.vuejs.org"}},[t._v("Vue.js")]),t._v(",\n          "),a("a",{attrs:{href:"https://vuetifyjs.com"}},[t._v("Vuetify UI")]),t._v(",\n          "),a("a",{attrs:{href:"https://laravel.com"}},[t._v("Laravel")]),t._v(",\n          "),a("a",{attrs:{href:"http://jwt-auth.readthedocs.io/en/develop/"}},[t._v("jwt-auth")])])])],1)],1)],1)},P=[],S=a("c93e"),E=a("2f62"),M={computed:Object(S["a"])({},Object(E["b"])({shop:function(t){return t.me&&t.me.shop}})),methods:{toDetail:function(){this.$router.push({name:"setting"})}}},D=M,F=Object(j["a"])(D,T,P,!1,null,null,null),U=F.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{attrs:{clipped:t.$vuetify.breakpoint.lgAndUp,fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[t._l(t.items,function(e){return e.seen?[e.heading?a("v-layout",{key:e.heading,attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[e.heading?a("v-subheader",[t._v("\n              "+t._s(e.heading)+"\n            ")]):t._e()],1),a("v-flex",{staticClass:"text-xs-center",attrs:{xs6:""}},[a("a",{staticClass:"body-2 black--text",attrs:{href:"#!"}},[t._v("EDIT")])])],1):e.children?a("v-list-group",{key:e.text,attrs:{"prepend-icon":e.model?e.icon:e["icon-alt"],"append-icon":""},model:{value:e.model,callback:function(a){t.$set(e,"model",a)},expression:"item.model"}},[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                "+t._s(e.text)+"\n              ")])],1)],1),t._l(e.children,function(e,n){return a("v-list-tile",{key:n,on:{click:t.next}},[e.icon?a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1):t._e(),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                "+t._s(e.text)+"\n              ")])],1)],1)})],2):a("v-list-tile",{key:e.text,attrs:{router:"",to:{name:e.routerName},exact:""},on:{click:t.next}},[a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n              "+t._s(e.text)+"\n            ")])],1)],1)]:t._e()})],2)],1),a("v-toolbar",{attrs:{"clipped-left":t.$vuetify.breakpoint.lgAndUp,color:"blue darken-3",dark:"",app:"",fixed:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3",staticStyle:{width:"300px"}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("span",{staticClass:"hidden-sm-and-down"},[t._v("后台管理系统")])],1),a("v-text-field",{staticClass:"hidden-sm-and-down",attrs:{flat:"","solo-inverted":"","prepend-icon":"search",label:"Search"}}),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("refresh")])],1),a("v-btn",{attrs:{href:"#",router:"",icon:""},on:{click:t.logout}},[a("v-icon",[t._v("lock_open")])],1)],1)],1)},q=[],z=(a("ac6a"),{data:function(){return{dialog:!1,drawer:null,items:[{icon:"fa fa-tachometer-alt",text:"数据统计",routerName:"home",seen:!0},{icon:"fas fa-list-ol",text:"砍价管理",routerName:"bargains",seen:!0},{icon:"fas fa-th-list",text:"商品管理",routerName:"items",seen:!0},{icon:"fas fa-calendar-alt",text:"活动商品",routerName:"eventItems",seen:!0},{icon:"fas fa-calendar",text:"活动管理",routerName:"events",seen:!0},{icon:"fa fa-user",text:"授权用户",routerName:"users",seen:!1},{icon:"store",text:"店铺管理",routerName:"shops",seen:!1},{icon:"fas fa-cogs",text:"店铺设置",routerName:"setting",seen:!0}]}},mounted:function(){this.$store.dispatch("getMe")},computed:Object(S["a"])({},Object(E["b"])({is_super:function(t){return t.me&&t.me.is_super},token:function(t){return t.getters.token}})),watch:{$route:"update",is_super:function(t){this.items.forEach(function(e){"shop"==e.routerName?e.seen=t:"setting"==e.routerName&&(e.seen=!t)})}},methods:{update:function(){this.$store.dispatch("getMe")},next:function(){},logout:function(){var t=this;this.$store.dispatch("logout").then(function(){t.$router.push({name:"login"})})}}}),L=z,R=Object(j["a"])(L,N,q,!1,null,null,null),A=R.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[a("v-btn",{attrs:{color:"primary"},on:{click:t.newItem}},[t._v("\n          新建商品\n        ")]),a("v-btn",{attrs:{color:"primary"},on:{click:t.publishEventItem}},[t._v("\n          发布活动\n        ")])],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},on:{"click:append":t.iconClick},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n            "+t._s(e.header.text)+"\n          ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-edit-dialog",{attrs:{"return-value":e.item.order_id,large:"",lazy:"",persistent:"","cancel-text":"取消","save-text":"保存"},on:{"update:returnValue":function(a){t.$set(e.item,"order_id",a)},save:function(a){t.saveOrder(e.item)}}},[a("div",[t._v(t._s(e.item.order_id))]),a("div",{staticClass:"mt-3 title",attrs:{slot:"input"},slot:"input"},[t._v("更新排序")]),a("v-text-field",{attrs:{slot:"input",rules:[t.integer],label:"编辑","single-line":"",counter:"",autofocus:""},slot:"input",model:{value:e.item.order_id,callback:function(a){t.$set(e.item,"order_id",a)},expression:"props.item.order_id"}})],1)],1),a("td",[a("img",{attrs:{src:e.item.image,height:"160"}})]),a("td",[t._v(t._s(e.item.name))]),a("td",[t._v(t._s(e.item.bargained_num))]),a("td",[a("v-chip",{attrs:{label:"",color:"red","text-color":"white"}},[t._v(t._s(e.item.winned_num))])],1),a("td",[t._v(t._s(e.item.exchanged_num))]),a("td",{staticClass:"justify-center  px-0"},[a("v-flex",[a("v-btn-toggle",[a("v-btn",{attrs:{flat:""}},[a("v-icon",{attrs:{title:"查看"},on:{click:function(a){t.viewItem(e.item)}}},[t._v("\n                  fas fa-eye\n                ")])],1),a("v-btn",{attrs:{flat:""}},[a("v-icon",{attrs:{title:"编辑"},on:{click:function(a){t.editItem(e.item)}}},[t._v("\n                  fas fa-pen\n                ")])],1),a("v-btn",{attrs:{flat:""}},[a("v-icon",{attrs:{title:"复制商品"},on:{click:function(a){t.copyItem(e.item)}}},[t._v("\n                  fas fa-clone\n                ")])],1),a("v-btn",{attrs:{flat:""}},[a("v-icon",{attrs:{title:"删除"},on:{click:function(a){t.deleteItem(e.item)}}},[t._v("\n                  fas fa-trash-alt\n                ")])],1)],1)],1)],1)]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"error",icon:"warning"}},[t._v("\n          抱歉，没有数据可以显示 :(\n        ")])],1)],2),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1),a("v-snackbar",{attrs:{top:!0,right:!0,color:t.snackColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.snackbarText)+"\n    "),a("v-btn",{attrs:{flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n      关闭\n    ")])],1)],1)},J=[],X=(a("386d"),a("a481"),a("a322")),B={data:function(){var t;return t={dropdowns:["编辑"],title:"砍价管理",search:"",snackColor:"success",selected:[],pagination:{},items:[],loading:!1,snackbar:!1,snackbarText:"更新成功~"},Object(X["a"])(t,"loading",!1),Object(X["a"])(t,"shops",[]),Object(X["a"])(t,"dialog",!1),Object(X["a"])(t,"integer",function(t){return!!t&&/^\d+$/.test(t)||"必须填写整数"}),Object(X["a"])(t,"headers",[{text:"排序ID",value:"status",sortable:!1},{text:"预览图",value:"image",sortable:!1},{text:"商品名",value:"name",sortable:!1},{text:"已砍数量",value:"bargained_num",sortable:!1},{text:"已赢取数量",value:"winned_num",sortable:!1},{text:"已兑换数量",value:"exchanged_num",sortable:!1},{text:"操作",value:"operation",width:"200px",sortable:!1}]),Object(X["a"])(t,"searchIcon","search"),t},computed:Object(S["a"])({},Object(E["b"])({is_super:function(t){return t.me&&t.me.is_super}}),{page:function(){return this.pagination?this.pagination.page:1},formTitle:function(){return-1===this.editedIndex?"新建":"编辑"}}),created:function(){this.getItems(1)},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{newItem:function(t){this.$router.push({name:"createItem"})},copyItem:function(t){this.$router.push({name:"copyItem",params:{id:t.id}})},submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},viewItem:function(t){},editItem:function(t){this.$router.push({name:"item",params:{id:t.id}})},publishEventItem:function(){this.$router.push({name:"events"})},updateItem:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"on",a=this,n=0;n<a.items.length;n++)if(a.items[n].id==t){a.items[n].is_posted="on"==e?1:0;break}},saveOrder:function(t){var e=this,a=b.replace("{id}",t.id);t.type="order",axios({method:"PUT",url:a,data:t}).then(function(t){e.snackbar=!0,e.snackColor="success",e.snackbarText="排序更新成功"}).catch(function(t){e.snackbar=!0,e.snackColor="error",e.snackbarText="提交失败"})},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},deleteItem:function(t){var e=this;if(confirm("此操作不可返回，是否继续")){var a=_.replace("{id}",t.id);t.type="order",axios({method:"DELETE",url:a,data:t}).then(function(a){e.snackbar=!0,e.snackColor="success",e.snackbarText="删除成功";var n=e.items.indexOf(t);e.items.splice(n,1)}).catch(function(t){e.snackbar=!0,e.snackColor="error",e.snackbarText="提交失败"})}},getItems:function(t){var e=this,a=e.search;e.loading=!0,e.$store.dispatch("getItems",{model:"items",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})}}},G=B,H=Object(j["a"])(G,V,J,!1,null,null,null),W=H.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[t.inputs?a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-flex",[t.inputs&&t.inputs.image?a("img",{attrs:{src:t.inputs.image,width:"375"}}):t._e(),a("v-text-field",{attrs:{label:"预览图[750px*556px]",value:"点击选择图片"},on:{click:function(e){t.pickFile("image")}}}),a("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:"multiple"},on:{change:function(e){t.onFilePicked(e)}}})],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.inputs.images,function(e,n){return a("v-flex",{key:n,attrs:{xs4:"","mr-2":"","mb-2":""}},[a("v-card",[a("v-card-media",{attrs:{src:e,height:"200px"}}),a("v-card-actions",{staticClass:"pa-3"},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"dark"},on:{click:function(e){t.deleteImage(n)}}},[t._v("删除")])],1)],1)],1)})),a("v-text-field",{attrs:{label:"幻灯片[750px*556px]",value:"点击选择图片/可多张"},on:{click:function(e){t.pickFile("images")}}}),a("input",{ref:"images",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:"multiple"},on:{change:function(e){t.onFilesPicked(e)}}})],1),a("v-text-field",{attrs:{rules:t.rules.name,label:"商品名称",required:"","error-messages":t.errors.name},model:{value:t.inputs.name,callback:function(e){t.$set(t.inputs,"name",e)},expression:"inputs.name"}}),a("v-textarea",{attrs:{"error-messages":t.errors.descr,"auto-grow":"",rows:"2",rules:t.rules.descr,label:"商品简介",required:""},model:{value:t.inputs.descr,callback:function(e){t.$set(t.inputs,"descr",e)},expression:"inputs.descr"}}),a("v-btn",{attrs:{loading:t.loading,disabled:!t.valid,large:"",color:"primary"},on:{click:t.submit}},[t._v("\n                提交\n            ")]),a("v-btn",{attrs:{large:"",color:"primary"},on:{click:t.toIndex}},[t._v("\n                返回\n            ")])],1):t._e()],1),a("v-snackbar",{attrs:{top:!0,right:!0,color:t.snackColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        "+t._s(t.snackText)+"\n        "),a("v-btn",{attrs:{flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n            关闭\n        ")])],1)],1)},K=[],Q=(a("28a5"),a("9393")),Z={data:function(){return{loading:!1,snackbar:!1,snackColor:"",snackText:"操作成功",valid:!0,inputs:{name:null,image:null,images:[]},menu1:!1,menu2:!1,errors:{name:[],descr:[],image:[],images:[]},rules:{name:[function(t){return!!t||"请输入店铺名"}],descr:[function(t){return!!t||"请输入描述"}],image:[],images:[]}}},created:function(){this.getItem()},computed:Object(S["a"])({},Object(E["b"])({})),watch:{$router:"getItem"},methods:{toIndex:function(){this.$router.go(-1)},deleteImage:function(t){this.inputs.images.splice(t,1)},submit:function(){var t,e,a=this;a.$refs.form.validate()&&(a.inputs.id&&"item"==a.$router.history.current.name?(t=b.replace("{id}",a.inputs.id),e="PUT"):(t=x,e="POST"),a.loading=!0,axios({method:e,url:t,data:a.inputs}).then(function(t){a.snackbar=!0,a.snackColor="success",a.loading=!1,"createItem"==a.$router.history.current.name?(a.snackText="创建成功",a.clear()):"copyItem"==a.$router.history.current.name?(a.snackText="复制成功",a.clear(),a.toIndex()):a.snackText="更新成功"}).catch(function(t){if(a.snackbar=!0,a.snackColor="error",a.loading=!1,t.response&&422==t.response.status){a.snackText="输入错误哦";var e=t.response.data;for(var n in e)a.errors[n]=e[n]}else a.snackText="服务器错误"}))},clear:function(){this.$refs.form.reset()},getItem:function(){var t=this;if(t.$route.params.id){var e=t.$route.params.id,a=b.replace("{id}",e);axios({method:"GET",url:a}).then(function(e){t.inputs=e.data.data})}},pickFile:function(t){this.$refs[t].click()},onFilePicked:function(t){var e=this,a=t.target.files;if(void 0!==a[0]){if(a[0].name.lastIndexOf(".")<=0)return;var n=new FileReader;n.readAsDataURL(a[0]),n.addEventListener("load",function(){e.inputs.image=n.result})}else this.inputs.image=""},onFilesPicked:function(t){var e=this,a=t.target.files;if(void 0!==a[0]){if(a[0].name.lastIndexOf(".")<=0)return;this.inputs.images||(this.inputs.images=[]);for(var n=function(t){var n=new FileReader;n.readAsDataURL(a[t]),n.addEventListener("load",function(){e.inputs.images.push(n.result)})},i=0;i<a.length;i++)n(i)}else this.inputs.images=[]},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(Q["a"])(e,3),n=a[0],i=a[1],s=a[2];return"".concat(i,"/").concat(s,"/").concat(n)}}},tt=Z,et=Object(j["a"])(tt,Y,K,!1,null,null,null),at=et.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-card",[a("v-card-title",[t._v("\n        "+t._s(t.title)+"\n        "),a("v-spacer"),a("div",{staticClass:"flex xs4"},[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("v-text-field",{attrs:{"append-icon-cb":t.iconClick,"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n              "+t._s(e.header.text)+"\n            ")]),a("span",[t._v("\n              "+t._s(e.header.value)+"\n            ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-avatar",{attrs:{tile:!1,size:"48px",color:"grey lighten-4"}},[a("img",{attrs:{src:e.item.avatar}})])],1),a("td",[t._v(t._s(e.item.nickname))]),a("td",[t._v(t._s(e.item.country)+"/"+t._s(e.item.province)+"/"+t._s(e.item.city))]),a("td",[t._v(t._s(e.item.sex))]),a("td",[t._v(t._s(e.item.tel))]),a("td",[t._v(t._s(e.item.created_at))]),a("td",[a("div",[a("v-btn",{attrs:{dark:"",fab:"",small:"",color:"primary"}},[a("v-icon",{attrs:{dark:""}},[t._v("remove")])],1),a("v-btn",{attrs:{dark:"",fab:"",small:"",color:"primary"}},[a("v-icon",{attrs:{dark:""}},[t._v("edit")])],1)],1)])]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"error",icon:"warning"}},[t._v("\n            抱歉，没有数据可以显示 :(\n          ")])],1)],2)],1),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1)],1)},it=[],st={data:function(){return{title:"店铺管理",search:"",selected:[],pagination:{},items:[],loading:!1,headers:[{text:"头像",value:"avatar",sortable:!1},{text:"昵称",value:"nickname",sortable:!1},{text:"国家/省/市/区",value:"country",sortable:!1},{text:"性别",value:"sex",sortable:!1},{text:"电话",value:"tel",sortable:!1},{text:"创建时间",value:"created_at",sortable:!1},{text:"操作",value:null,sortable:!1}],searchIcon:"search"}},computed:Object(S["a"])({},Object(E["b"])({}),{page:function(){return this.pagination?this.pagination.page:1}}),created:function(){this.getItems(1)},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},getItems:function(t){var e=this,a=e.search;e.loading=!0,e.$store.dispatch("getItems",{model:"shop",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})}}},rt=st,ot=Object(j["a"])(rt,nt,it,!1,null,null,null),ct=ot.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-card",[a("v-card-title",[t._v("\n        "+t._s(t.title)+"\n        "),a("v-spacer"),a("div",{staticClass:"flex xs4"},[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("v-text-field",{attrs:{"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},on:{"click:append":t.iconClick},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n              "+t._s(e.header.text)+"\n            ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-avatar",{attrs:{tile:!1,size:"48px",color:"grey lighten-4"}},[a("img",{attrs:{src:e.item.avatar}})])],1),a("td",[t._v(t._s(e.item.nickname))]),a("td",[t._v(t._s(e.item.country)+"/"+t._s(e.item.province)+"/"+t._s(e.item.city))]),a("td",[t._v(t._s(e.item.sex))]),a("td",[t._v(t._s(e.item.tel))]),a("td",[t._v(t._s(e.item.created_at))])]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"error",icon:"warning"}},[t._v("\n            抱歉，没有数据可以显示 :(\n          ")])],1)],2)],1),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1)],1)},dt=[],ut={data:function(){return{title:"用户授权",search:"",selected:[],pagination:{},items:[],loading:!1,headers:[{text:"头像",value:"avatar",sortable:!1},{text:"昵称",value:"nickname",sortable:!1},{text:"国家/省/市/区",value:"country",sortable:!1},{text:"性别",value:"sex",sortable:!1},{text:"电话",value:"tel",sortable:!1},{text:"创建时间",value:"created_at",sortable:!1}],searchIcon:"search"}},computed:Object(S["a"])({},Object(E["b"])({}),{page:function(){return this.pagination?this.pagination.page:1}}),created:function(){this.getItems(1)},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},getItems:function(t){var e=this,a=e.search;e.loading=!0,e.$store.dispatch("getItems",{model:"user",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})}}},mt=ut,vt=Object(j["a"])(mt,lt,dt,!1,null,null,null),pt=vt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[t.inputs?a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.name,label:"店铺名",required:""},model:{value:t.inputs.name,callback:function(e){t.$set(t.inputs,"name",e)},expression:"inputs.name"}}),a("v-text-field",{attrs:{rules:t.rules.title,label:"页面标题",required:""},model:{value:t.inputs.title,callback:function(e){t.$set(t.inputs,"title",e)},expression:"inputs.title"}}),a("v-text-field",{attrs:{rules:t.rules.tel,label:"联系电话",required:""},model:{value:t.inputs.tel,callback:function(e){t.$set(t.inputs,"tel",e)},expression:"inputs.tel"}}),a("v-text-field",{attrs:{rules:t.rules.address,label:"地址",required:""},model:{value:t.inputs.address,callback:function(e){t.$set(t.inputs,"address",e)},expression:"inputs.address"}}),a("v-flex",[t.inputs&&t.inputs.thumb?a("img",{attrs:{src:t.inputs.thumb,height:"200"}}):t._e(),a("v-text-field",{attrs:{label:"店铺头像[200px*200px]"},on:{click:function(e){t.pickFile("thumb")}},model:{value:t.inputs.thumb_name,callback:function(e){t.$set(t.inputs,"thumb_name",e)},expression:"inputs.thumb_name"}}),a("input",{ref:"thumb",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.onFilePicked("thumb",e)}}})],1),a("v-flex",[t.inputs&&t.inputs.header_image?a("img",{attrs:{src:t.inputs.header_image,width:"750"}}):t._e(),a("v-text-field",{attrs:{label:"头部图片[750px*300px]"},on:{click:function(e){t.pickFile("header_image")}},model:{value:t.inputs.header_image_name,callback:function(e){t.$set(t.inputs,"header_image_name",e)},expression:"inputs.header_image_name"}}),a("input",{ref:"header_image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.onFilePicked("header_image",e)}}})],1),a("v-btn",{attrs:{loading:t.loading,disabled:!t.valid,large:"",color:"primary"},on:{click:t.submit}},[t._v("\n                更新店铺信息\n            ")])],1):t._e()],1),a("v-snackbar",{attrs:{color:"success",top:!0,right:!0},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        更新成功~\n        "),a("v-btn",{attrs:{color:"white",flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n            关闭\n        ")])],1)],1)},ht=[],gt={data:function(){return{loading:!1,snackbar:!1,valid:!0,inputs:{},menu1:!1,menu2:!1,errors:{name:[],title:[],thumb:[],tel:[],address:[]},rules:{name:[function(t){return!!t||"请输入店铺名"}],title:[function(t){return!!t||"请输入页面标题"}],thumb:[function(t){return!!t||"请上传店铺头像"}],tel:[function(t){return!!t||"请输入电话"}],address:[function(t){return!!t||"请填写地址"}]}}},mounted:function(){var t=this.$store.state;t.me&&(this.inputs=t.me.shop)},computed:Object(S["a"])({},Object(E["b"])({shop:function(t){return t.me&&t.me.shop}})),watch:{shop:function(t){t&&(this.inputs=t)}},methods:{submit:function(){var t=this;if(t.$refs.form.validate()){var e=w+"/"+t.shop.id;t.loading=!0,axios({method:"PUT",url:e,data:{name:t.inputs.name,title:t.inputs.title,header_image:t.inputs.header_image,thumb:t.inputs.thumb,tel:t.inputs.tel,address:t.inputs.address,start_date:t.inputs.start_date,end_date:t.inputs.end_date}}).then(function(e){t.snackbar=!0,t.loading=!1}).catch(function(e){if(t.snackbar=!0,t.loading=!1,e.response.status>=400){var a=e.response.data;for(var n in a)self.errors[n]=a[n][0]}})}},clear:function(){this.$refs.form.reset()},pickFile:function(t){this.$refs[t].click()},onFilePicked:function(t,e){var a=this,n=e.target.files,i=t+"_name";if(void 0!==n[0]){if(this.inputs[i]=n[0].name,this.inputs[i].lastIndexOf(".")<=0)return;var s=new FileReader;s.readAsDataURL(n[0]),s.addEventListener("load",function(){a.inputs[t]=s.result})}else this.inputs[t]="",this.inputs[i]=""},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(Q["a"])(e,3),n=a[0],i=a[1],s=a[2];return"".concat(i,"/").concat(s,"/").concat(n)}}},bt=gt,_t=Object(j["a"])(bt,ft,ht,!1,null,null,null),xt=_t.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-card",[a("v-card-title",[t._v("\n                "+t._s(t.title)+"\n                "),a("v-spacer"),t.shops&&t.is_super?a("div",{staticClass:"flex xs4 mr-4"},[a("v-select",{attrs:{items:t.shops,label:"选择店铺",solo:""}})],1):t._e(),a("div",{staticClass:"flex xs4"},[a("v-text-field",{attrs:{"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},on:{"click:append":t.iconClick},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                            "+t._s(e.header.text)+"\n                        ")])])]}},{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.item_name))]),a("td",[t._v(t._s(e.item.user_name))]),a("td",[t._v(t._s(e.item.joined_times))]),a("td",[t._v(t._s(e.item.current_price))]),a("td",[t._v(t._s(1==e.item.is_winned?"是":"否"))]),a("td",[t._v(t._s(1==e.item.has_bought?"是":"否"))]),a("td",[t._v(t._s(e.item.created_at))])]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"error",icon:"warning"}},[t._v("\n                        抱歉，没有数据可以显示 :(\n                    ")])],1)],2)],1),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1)],1)},It=[],wt={data:function(){return{title:"砍价管理",search:"",selected:[],pagination:{},items:[],loading:!1,shops:[],headers:[{text:"商品名称",value:"item_id",sortable:!1},{text:"用户名",value:"nickname",sortable:!1},{text:"被砍次数",value:"joined_times",sortable:!1},{text:"当前价格",value:"current_price",sortable:!1},{text:"是否赢取",value:"is_winned",sortable:!1},{text:"是否购买",value:"has_bought",sortable:!1},{text:"创建时间",value:"created_at",sortable:!1}],searchIcon:"search"}},computed:Object(S["a"])({},Object(E["b"])({is_super:function(t){return t.me&&t.me.is_super}}),{page:function(){return this.pagination?this.pagination.page:1}}),created:function(){this.getItems(1)},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},getItems:function(t){var e=this,a=e.search;e.loading=!0,e.$store.dispatch("getItems",{model:"bargain",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})}}},yt=wt,Ot=Object(j["a"])(yt,kt,It,!1,null,null,null),jt=Ot.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},on:{click:t.createEvent},slot:"activator"},[t._v("新建活动")]),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[t.editedItem?a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-text-field",{attrs:{disabled:t.disabled,label:"活动名称","error-messages":t.errors.name},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{ref:"startDateMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.startDateMenu,callback:function(e){t.startDateMenu=e},expression:"startDateMenu"}},[a("v-text-field",{attrs:{slot:"activator",label:"活动开始日期",hint:"","persistent-hint":"","prepend-icon":"event","error-messages":t.errors.start_date},slot:"activator",model:{value:t.editedItem.start_date,callback:function(e){t.$set(t.editedItem,"start_date",e)},expression:"editedItem.start_date"}}),a("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.startDateMenu=!1}},model:{value:t.editedItem.start_date,callback:function(e){t.$set(t.editedItem,"start_date",e)},expression:"editedItem.start_date"}})],1)],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{ref:"endDateMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.endDateMenu,callback:function(e){t.endDateMenu=e},expression:"endDateMenu"}},[a("v-text-field",{attrs:{slot:"activator",label:"活动结束日期",hint:"","persistent-hint":"","prepend-icon":"event","error-messages":t.errors.end_date},slot:"activator",model:{value:t.editedItem.end_date,callback:function(e){t.$set(t.editedItem,"end_date",e)},expression:"editedItem.end_date"}}),a("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.endDateMenu=!1}},model:{value:t.editedItem.end_date,callback:function(e){t.$set(t.editedItem,"end_date",e)},expression:"editedItem.end_date"}})],1)],1)],1)],1):t._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("关闭")]),t.disabled?t._e():a("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:t.disabled},nativeOn:{click:function(e){return t.save(e)}}},[t._v("保存")])],1)],1)],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},on:{"click:append":t.iconClick},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                        "+t._s(e.header.text)+"\n                    ")])])]}},{key:"items",fn:function(e){return[a("td",[t._v("\n                    "+t._s(e.item.name)+"\n                    "),a("v-chip",{attrs:{color:"warning","text-color":"white",small:""}},[t._v("\n                        "+t._s(e.item.total_qty)+"\n                    ")])],1),a("td",[t._v(t._s(e.item.start_date))]),a("td",[t._v(t._s(e.item.end_date))]),a("td",{staticClass:"justify-center  px-0"},[a("v-flex",[a("v-btn-toggle",[a("v-btn",{attrs:{flat:""}},[a("v-icon",{attrs:{title:"查看活动商品"},on:{click:function(a){t.viewItem(e.item)}}},[t._v("\n                                    fas fa-eye\n                                ")])],1),a("v-btn",{attrs:{flat:""}},[a("v-icon",{attrs:{title:"编辑"},on:{click:function(a){t.editItem(e.item)}}},[t._v("\n                                    fas fa-pen\n                                ")])],1)],1)],1)],1)]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"info",icon:"info"}},[t._v("\n                    没有数据~\n                ")])],1)],2),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1),a("v-snackbar",{attrs:{top:!0,right:!0,color:t.snackColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        "+t._s(t.snackbarText)+"\n        "),a("v-btn",{attrs:{flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n            关闭\n        ")])],1)],1)},$t=[],Tt=(a("f751"),a("456d"),function(t){var e=t.vm,a=t.method,n=t.data;return new Promise(function(t,i){var s;s="PUT"==a?h.replace("{id}",n.id).replace("{eventId}",n.event_id):g.replace("{eventId}",n.event_id),axios({method:a,url:s,data:n}).then(function(a){return e.snackbar=!0,e.snackColor="success",e.snackbarText="恭喜，提交成功。",e.getItems(1),t(a)}).catch(function(t){return e.snackbar=!0,e.snackColor="error",422==t.status?e.snackbarText=t.data[Object.keys(t.data)[0]][0]:e.snackbarText="抱歉，服务器发生错误，稍后重试",i(t)})})}),Pt=function(t){t.vm;var e=t.method,a=t.data;return new Promise(function(t,n){var i;i="PUT"==e?p.replace("{id}",a.id):f,axios({method:e,url:i,data:a}).then(function(e){return t(e)}).catch(function(t){return n(t)})})},St={data:function(){var t;return t={startDateMenu:!1,endDateMenu:!1,title:"活动管理",search:"",snackColor:"success",pagination:{},items:[],canChooseItems:[],loading:!1,snackbar:!1,snackbarText:"更新成功~"},Object(X["a"])(t,"loading",!1),Object(X["a"])(t,"dialog",!1),Object(X["a"])(t,"eventDialog",!1),Object(X["a"])(t,"formTitle","新建"),Object(X["a"])(t,"editedItem",null),Object(X["a"])(t,"disabled",!1),Object(X["a"])(t,"storeMethod","POST"),Object(X["a"])(t,"integer",function(t){return!!t&&/^\d+$/.test(t)||"必须填写整数"}),Object(X["a"])(t,"headers",[{text:"活动名称",value:"name",sortable:!1},{text:"开始日期",value:"start_date",sortable:!1},{text:"结束日期",value:"end_date",sortable:!1},{text:"操作",value:"operation",width:"200px",sortable:!1}]),Object(X["a"])(t,"searchIcon","search"),Object(X["a"])(t,"errors",{}),t},computed:{page:function(){return this.pagination?this.pagination.page:1}},created:function(){this.getItems(1)},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},getItems:function(t){t=t||1;var e=this,a=e.search;e.loading=!0,e.$store.dispatch("getItems",{model:"events",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})},createEvent:function(){var t=this;t.errors={},t.formTitle="新建活动",t.editedItem={name:"",start_date:"",end_date:""},this.storeMethod="POST"},editItem:function(t){var e=this;e.errors={},e.dialog=!0,e.formTitle=t.name,e.editedIndex=this.items.indexOf(t),e.editedItem=Object.assign({},t),e.disabled=!1,e.storeMethod="PUT"},save:function(){var t=this;Pt({vm:t,method:t.storeMethod,data:t.editedItem}).then(function(e){t.snackbar=!0,t.snackColor="success",t.snackbarText="恭喜，提交成功。",t.getItems(1),t.dialog=!1}).catch(function(e){422!=e.status?(t.snackbar=!0,t.snackColor="error",t.snackbarText="抱歉，服务器发生错误，稍后重试"):t.errors=e.data})},close:function(){this.dialog=!1},viewItem:function(t){this.$router.push({name:"eventItems",params:{id:t.id}})}}},Et=St,Mt=Object(j["a"])(Et,Ct,$t,!1,null,null,null),Dt=Mt.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},on:{click:t.createItem},slot:"activator"},[t._v("新建活动商品")]),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[t.editedItem?a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[t.canChooseItems&&"POST"==t.storeMethod?a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-select",{attrs:{items:t.canChooseItems,label:"请选择活动商品","error-messages":t.errors.item_id},model:{value:t.editedItem.item_id,callback:function(e){t.$set(t.editedItem,"item_id",e)},expression:"editedItem.item_id"}})],1):t._e(),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{disabled:t.disabled,label:"原价","error-messages":t.errors.origin_price},model:{value:t.editedItem.origin_price,callback:function(e){t.$set(t.editedItem,"origin_price",e)},expression:"editedItem.origin_price"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{disabled:t.disabled,label:"最低价","error-messages":t.errors.bargain_price},model:{value:t.editedItem.bargain_price,callback:function(e){t.$set(t.editedItem,"bargain_price",e)},expression:"editedItem.bargain_price"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{disabled:t.disabled,label:"总数","error-messages":t.errors.total_num},model:{value:t.editedItem.total_num,callback:function(e){t.$set(t.editedItem,"total_num",e)},expression:"editedItem.total_num"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{disabled:t.disabled,label:"砍价最少价格","error-messages":t.errors.bargain_min_price},model:{value:t.editedItem.bargain_min_price,callback:function(e){t.$set(t.editedItem,"bargain_min_price",e)},expression:"editedItem.bargain_min_price"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{disabled:t.disabled,label:"砍价最大价格","error-messages":t.errors.bargain_max_price},model:{value:t.editedItem.bargain_max_price,callback:function(e){t.$set(t.editedItem,"bargain_max_price",e)},expression:"editedItem.bargain_max_price"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{disabled:t.disabled,label:"砍价最少次数","error-messages":t.errors.bargain_min_times},model:{value:t.editedItem.bargain_min_times,callback:function(e){t.$set(t.editedItem,"bargain_min_times",e)},expression:"editedItem.bargain_min_times"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{disabled:t.disabled,label:"砍价最大次数","error-messages":t.errors.bargain_max_times},model:{value:t.editedItem.bargain_max_times,callback:function(e){t.$set(t.editedItem,"bargain_max_times",e)},expression:"editedItem.bargain_max_times"}})],1)],1)],1):t._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("关闭")]),t.disabled?t._e():a("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:t.disabled},nativeOn:{click:function(e){return t.save(e)}}},[t._v("保存")])],1)],1)],1)],1),a("v-spacer"),t.events?a("v-flex",{attrs:{"mt-4":""}},[a("v-select",{attrs:{items:t.events,label:"请选择活动"},on:{change:t.changeEvent},model:{value:t.eventId,callback:function(e){t.eventId=e},expression:"eventId"}})],1):t._e(),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":t.searchIcon,label:"搜索","single-line":"","hide-details":""},on:{"click:append":t.iconClick},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer")],1),a("v-data-table",{attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                        "+t._s(e.header.text)+"\n                    ")])])]}},{key:"items",fn:function(e){return[a("td",[t._v("\n                    "+t._s(e.item.name)+"\n                    "),a("v-chip",{attrs:{color:"warning","text-color":"white",small:""}},[t._v("\n                        详情\n                    ")])],1),a("td",[t._v(t._s(e.item.origin_price))]),a("td",[t._v(t._s(e.item.bargain_price))]),a("td",[t._v(t._s(e.item.total_num))]),a("td",[t._v(t._s(e.item.bargained_num))]),a("td",[a("v-chip",{attrs:{label:"",color:"red","text-color":"white"}},[t._v(t._s(e.item.winned_num))])],1),a("td",[t._v(t._s(e.item.exchanged_num))]),a("td",[1==e.item.is_released?a("v-chip",{attrs:{label:"",color:"primary","text-color":"white"}},[t._v("\n                        已发布\n                    ")]):a("v-chip",{attrs:{label:"",color:"gray","text-color":"dark"}},[t._v("\n                        未发布\n                    ")])],1),a("td",{staticClass:"justify-center  px-0"},[a("v-flex",[a("v-btn-toggle",[a("v-btn",{attrs:{flat:""}},[a("v-icon",{attrs:{title:"查看"},on:{click:function(a){t.viewItem(e.item)}}},[t._v("\n                                    fas fa-eye\n                                ")])],1),a("v-btn",{attrs:{flat:""}},[a("v-icon",{attrs:{title:"编辑"},on:{click:function(a){t.editItem(e.item)}}},[t._v("\n                                    fas fa-pen\n                                ")])],1),a("v-btn",{attrs:{flat:""}},[0==e.item.is_released?a("v-icon",{attrs:{title:"发布"},on:{click:function(a){t.releaseEventItem(e.item,"on")}}},[t._v("\n                                    fas fa-toggle-off\n                                ")]):1==e.item.is_released?a("v-icon",{attrs:{title:"下架"},on:{click:function(a){t.releaseEventItem(e.item,"off")}}},[t._v("\n                                    fas fa-toggle-on\n                                ")]):t._e()],1)],1)],1)],1)]}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:t.items&&!t.loading,color:"info",icon:"info"}},[t.events&&0!=t.events.length?t.eventId?a("div",[t._v("还没有发布活动商品哦，去\n                        "),a("v-btn",{staticStyle:{"min-width":"0px"},attrs:{color:"warning",small:""}},[t._v("发布")]),t._v(":(")],1):a("div",[t._v(" 请选择对应活动查看:(")]):a("div",[t._v("还没有活动哦，先创建一个吧 :(")])])],1)],2),t.pagination&&t.pagination.lastPage>1?a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:t.pagination.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1),a("v-snackbar",{attrs:{top:!0,right:!0,color:t.snackColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        "+t._s(t.snackbarText)+"\n        "),a("v-btn",{attrs:{flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n            关闭\n        ")])],1)],1)},Ut=[],Nt={data:function(){var t;return t={title:"活动管理",eventId:null,event:null,search:"",snackColor:"success",pagination:{},items:[],canChooseItems:[],loading:!1,snackbar:!1,snackbarText:"更新成功~"},Object(X["a"])(t,"loading",!1),Object(X["a"])(t,"dialog",!1),Object(X["a"])(t,"eventDialog",!1),Object(X["a"])(t,"formTitle","新建"),Object(X["a"])(t,"editedItem",null),Object(X["a"])(t,"disabled",!1),Object(X["a"])(t,"storeMethod","POST"),Object(X["a"])(t,"integer",function(t){return!!t&&/^\d+$/.test(t)||"必须填写整数"}),Object(X["a"])(t,"headers",[{text:"商品名",value:"name",sortable:!1},{text:"原价",value:"origin_price",sortable:!1},{text:"最低价",value:"bargain_price",sortable:!1},{text:"总数",value:"total_num",sortable:!1},{text:"已砍数量",value:"bargained_num",sortable:!1},{text:"已赢取数量",value:"winned_num",sortable:!1},{text:"已兑换数量",value:"exchanged_num",sortable:!1},{text:"状态",value:"status",sortable:!1},{text:"操作",value:"operation",width:"200px",sortable:!1}]),Object(X["a"])(t,"searchIcon","search"),Object(X["a"])(t,"errors",{item_id:[],origin_price:[],bargain_price:[],bargain_max_price:[],bargain_min_price:[],bargain_max_times:[],bargain_min_times:[],total_num:[]}),t},computed:Object(S["a"])({},Object(E["b"])({events:function(t){return t.events}}),{page:function(){return this.pagination?this.pagination.page:1}}),created:function(){var t=this;t.$store.dispatch("getEvents").then(function(e){t.$router.history.current.params.id&&(t.eventId=parseInt(t.$router.history.current.params.id));for(var a=0;a<t.events.length;a++)if(t.$router.history.current.params.id){if(t.eventId==t.events[a].value){t.event=t.events[a];break}}else if(t.events[a].is_current){t.eventId=t.events[a].value,t.event=t.events[a];break}})},watch:{page:function(t,e){void 0!=e&&this.getItems(t)}},methods:{submit:function(t){this.getItems(1),"search"==this.searchIcon&&(this.searchIcon="clear")},iconClick:function(){"search"==this.searchIcon?(this.searchIcon="clear",this.submit()):(this.searchIcon="search",this.clearSearch())},clearSearch:function(){this.search="",this.submit()},changeEvent:function(t){this.getItems()},getChooseItems:function(){var t=this,e=k;axios.get(e,{params:{event_id:t.eventId}}).then(function(e){for(var a=[],n=e.data.data,i=0;i<n.length;i++)a[i]={text:n[i].name,value:n[i].id};t.canChooseItems=a})},getItems:function(t){t=t||1;var e=this,a=e.search;e.loading=!0,e.eventId&&e.$store.dispatch("getItems",{model:"event/"+e.eventId+"/items",keyword:a,page:t}).then(function(t){e.loading=!1,e.pagination=t.pagination,e.items=t.data})},createItem:function(){var t=this;t.formTitle="新建 - "+t.event.text,t.editedItem={origin_price:"",bargain_price:"",total_num:"",bargain_min_price:"",bargain_max_price:"",bargain_min_times:"",bargain_max_times:"",event_id:t.eventId},this.storeMethod="POST",t.getChooseItems()},releaseEventItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"on";if("on"==e&&!confirm("活动中的商品发布后将无法修改及下架，是否继续？"))return!1;var a=this,n=(a.event,"on"==e?1:0);Tt({vm:a,method:"PUT",data:{id:t.id,event_id:t.event_id,is_released:n,type:"release"}})},editItem:function(t){this.dialog=!0,this.formTitle=t.name,this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.disabled=!1,this.storeMethod="PUT",this.errors={}},save:function(){var t=this;Tt({vm:t,method:t.storeMethod,data:t.editedItem}).then(function(e){t.dialog=!1,"POST"==t.storeMethod&&t.getChooseItems()}).catch(function(e){"POST"==t.storeMethod&&(t.errors=e.data)})},close:function(){this.dialog=!1},viewItem:function(t){this.dialog=!0,this.storeMethod="PUT",this.formTitle=t.name,this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.disabled=!0}}},qt=Nt,zt=Object(j["a"])(qt,Ft,Ut,!1,null,null,null),Lt=zt.exports,Rt=[{path:"/login",name:"login",meta:{title:"登陆"},components:{login:$}},{path:"/",name:"home",meta:{title:"首页"},components:{mainContent:U,navigation:A}},{path:"/",name:"logout",meta:{title:"登出"},components:{}},{path:"/users",name:"users",meta:{title:"授权用户"},components:{mainContent:pt,navigation:A}},{path:"/shops",name:"shops",meta:{title:"店铺管理"},components:{mainContent:ct,navigation:A}},{path:"/setting",name:"setting",meta:{title:"店铺管理"},components:{mainContent:xt,navigation:A}},{path:"/bargains",name:"bargains",meta:{title:"砍价查看"},components:{mainContent:jt,navigation:A}},{path:"/items",name:"items",meta:{title:"商品管理"},components:{mainContent:W,navigation:A}},{path:"/item/:id",name:"item",meta:{title:"商品编辑"},components:{mainContent:at,navigation:A}},{path:"/item",name:"createItem",meta:{title:"创建商品"},components:{mainContent:at,navigation:A}},{path:"/c/item/:id",name:"copyItem",meta:{title:"复制商品"},components:{mainContent:at,navigation:A}},{path:"/events",name:"events",meta:{title:"活动管理"},components:{mainContent:Dt,navigation:A}},{path:"/event/:id?/items",name:"eventItems",meta:{title:"活动商品"},components:{mainContent:Lt,navigation:A}}],At=Rt,Vt={refreshToken:function(t,e){t.token=e,window.localStorage.setItem("token",e)},logout:function(t){t.token=null,t.me=null,window.localStorage.removeItem("token")},me:function(t,e){t.me=e},setEvents:function(t,e){for(var a=[],n=0;n<e.length;n++){var i=e[n].name;e[n].is_current&&(i+="【活动中】"),a[n]={text:i,value:e[n].id,is_current:e[n].is_current}}t.events=a}},Jt={getMe:function(t){var e=t.commit;return new Promise(function(t,a){axios.get(d).then(function(t){e("me",t.data.data)}).catch(function(t){e("me",null)})})},refreshToken:function(t,e){var a=t.commit;return new Promise(function(t,n){e?(a("refreshToken",e),t()):axios.post(u).then(function(t){a("refreshToken",t.data.token)}).catch(function(t){})})},login:function(t,e){t.commit;return new Promise(function(t,e){})},logout:function(t){var e=t.commit;return new Promise(function(t,a){axios.post(I).then(function(a){return e("logout"),t(a)}).catch(function(t){return a(t)})})},getEvents:function(t){var e=t.commit;return new Promise(function(t,a){var n=v;axios.get(n).then(function(a){return e("setEvents",a.data.data),t(a.data.data)}).catch(function(t){return a(t)})})},getItems:function(t,e){t.state,t.commit;var a=e.model,n=e.page,i=e.keyword;return new Promise(function(t,e){void 0==n&&(n=1);var s=m+a;axios.get(s,{params:{page:n,keyword:i}}).then(function(e){var a=e.data.data,n={rowsPerPage:e.data.meta.per_page,totalItems:e.data.meta.total,page:e.data.meta.current_page,lastPage:e.data.meta.last_page},i={data:a,pagination:n};return t(i)}).catch(function(t){return e(t)})})}},Xt={token:function(t,e){return t.token=window.localStorage.getItem("token"),t.token},me:function(t,e){return t.me},events:function(t,e){return t.events}};n["default"].use(E["a"]);var Bt=new E["a"].Store({state:{account:{},user:{},auth:!1,token:null,me:null,events:null},getters:Xt,actions:Jt,mutations:Vt}),Gt=a("ce5b"),Ht=a.n(Gt);a("b56c"),a("15f5");n["default"].use(Ht.a,{iconfont:"fa"}),n["default"].use(i["a"]);var Wt={hashbang:!0,mode:"hash",routes:At},Yt=new i["a"](Wt);window.axios=a("bc3a"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.defaults.withCredentials=!0,axios.interceptors.request.use(function(t){return Bt.getters.token&&(t.headers.Authorization="bearer ".concat(Bt.getters.token)),t},function(t){return Promise.reject(t)}),axios.interceptors.response.use(function(t){var e=t.data.token;return e&&Bt.dispatch("refreshToken",e).then(function(){Yt.push({name:"home"})}),t},function(t){switch(t.response.status){case 401:Yt.push({name:"login"});case 405:case 404:case 500:}return Promise.reject(t.response)}),Yt.beforeEach(function(t,e,a){t.meta.title&&(document.title=t.meta.title+" - 后台管理系统"),a()}),n["default"].config.productionTip=!1,new n["default"]({router:Yt,store:Bt,render:function(t){return t(s["default"])}}).$mount("#app")},b56c:function(t,e,a){},b6b5:function(t,e){}});
//# sourceMappingURL=app.807ecc26.js.map